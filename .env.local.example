# Local Environment Overrides
# Copy this file to .env.local and modify as needed
# .env.local is git-ignored and will override values from .env

# ===========================================
# PARALLEL DEVELOPMENT INSTANCE EXAMPLE
# ===========================================
# Uncomment the block below to run a local instance alongside the main one
# This uses different external ports to avoid conflicts
# Internal ports stay the same since each Docker stack runs in isolation

# SERVER_PORT=8281
# DB_HOST=localhost
# DB_PORT=5433
# DB_NAME=waugzee_local_dev
# DB_USER=waugzee_local_user
# DB_PASSWORD=waugzee_local_password
# CORS_ALLOW_ORIGINS=http://localhost:3010,http://localhost:3011
# CLIENT_PORT=3011
# VITE_API_URL=http://localhost:8281
# VITE_WS_URL=ws://localhost:8281/ws
# VITE_ENV=local-dev
# DOCKER_ENV=claude                   # Unique Docker environment (containers/volumes/networks)
# SESSION_COOKIE_NAME=sessionID_claude # Unique session cookie name to avoid conflicts

# ===========================================
# INDIVIDUAL OVERRIDE EXAMPLES
# ===========================================

# Example: Use human-readable text logs instead of JSON (better for Tilt development)
# LOG_FORMAT=text

# ===========================================
# GO 1.25 EXPERIMENTAL FEATURES
# ===========================================
# Enable experimental Go 1.25 features for improved performance
# Default: greenteagc,jsonv2 (enabled in both dev and prod)
#
# greenteagc: New garbage collector with 10-40% reduction in GC overhead
#             Improves performance of marking and scanning small objects
#             through better locality and CPU scalability
#
# jsonv2:     New JSON implementation with substantially faster decoding
#             and encoding performance at parity with the old implementation
#
# To disable all experimental features:
# GOEXPERIMENT=none
#
# To enable only specific features (comma-separated):
# GOEXPERIMENT=greenteagc
# GOEXPERIMENT=jsonv2
# GOEXPERIMENT=greenteagc,jsonv2

# Example: Override database connection for local development
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=waugzee_local_dev
# DB_USER=waugzee_local_user
# DB_PASSWORD=waugzee_local_password

# Example: Use different cache address for local development  
# DB_CACHE_ADDRESS=localhost

# Example: Override CORS origins for local testing
# CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:3010

# Example: Zitadel OIDC configuration for local development
# ZITADEL_CLIENT_ID=your-client-id
# ZITADEL_INSTANCE_URL=https://your-zitadel-instance.com
# ZITADEL_PRIVATE_KEY=base64-encoded-private-key
# ZITADEL_KEY_ID=your-key-id
# ZITADEL_CLIENT_ID_M2M=your-m2m-client-id

# Example: Client overrides for local development
# VITE_API_URL=http://localhost:8080
# VITE_WS_URL=ws://localhost:8080/ws
# VITE_ENV=local-dev

# ===========================================
# MONITORING & LOGGING
# ===========================================
# VictoriaLogs URL for client-side log ingestion
# This enables sending frontend logs to VictoriaLogs for centralized monitoring
# Requires the monitoring stack to be running and accessible
# The waugzee server must be on the monitoring network to reach VictoriaLogs
#
# Example: Connect to local monitoring stack
# VICTORIA_LOGS_URL=http://victorialogs:9428


export DBEE_CONNECTIONS='
[
  {
    "name": "Waugze Dev DB", 
    "type": "postgres", 
    "url": "postgres://{{ env \"DB_USER\" }}:{{ env \"DB_PASSWORD\" }}@{{ env \"DB_HOST\" }}:{{ env \"DB_PORT\" }}/{{ env \"DB_NAME\" }}?sslmode=disable"
  }
]'
